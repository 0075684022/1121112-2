<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
   
  <script src="setting.js"></script>
  <script src="Cookie.js"></script> 
  <script src="dateTime.js"></script> 
  <script src="HTTP2024.js"></script>

 <script>
  //respiratoryRate.js

  var jsonObj = {
  "resourceType": "Observation",
  "id": "example-observation-1",
  "meta": {
    "profile": ["http://hl7.org/fhir/StructureDefinition/bone-density"]
  },
  "status": "final",
  "code": {
    "coding": [
      {
        "system": "http://loinc.org",
        "code": "789-8",
        "display": "Erythrocytes [#/volume] in Blood by Automated count"
      }
    ],
    "text": "Red Blood Cell Count"
  },
  "subject": {
    "reference": "Patient/24957116",
    "display":"陳敬元"
  },
  "effectiveDateTime": "2023-10-17T08:30:00+00:00",
  "valueQuantity": {
    "value": 5.2,
    "unit": "10^12/L",
    "system": "http://unitsofmeasure.org",
    "code": "10^12/L"
  }
};	 
function postData() {
      jsonObj.valueQuantity.value = parseFloat(document.getElementById("allergenLevel").value);
      jsonObj.effectiveDateTime = getFormattedTime();
      var jsonStr = JSON.stringify(jsonObj);
      var apiURL = FHIRrootURL + "Observation";
      sendHttpPost(apiURL, jsonStr, callBack);
    }

    function callBack(ret) {
      console.log(ret);    
    }
  </script>  
</head>
<body style="height: 780px">
  <p>請輸入過敏原</p>
  <input id="Button1" onclick="postData()" type="button" value="postData" /><br/>
  過敏原: <input type="text" id="allergenLevel" />  <br/>
</body>
</html>